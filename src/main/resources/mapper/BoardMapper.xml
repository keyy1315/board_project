<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.example.board_project.mapper.BoardMapper">
    <select id="findAll" resultType="Board">
        SELECT * FROM bt_tb_board
    </select>

    <select id="countBoard" parameterType="searchFilterDTO" resultType="int">
        SELECT COUNT(*) FROM bt_tb_board
        WHERE 1=1
        <if test="categoryCode != null">
            AND category_cd = #{categoryCode}
        </if>
        <if test="search != null">
            AND #{searchCode} LIKE CONCAT('%', #{search}, '%')
        </if>
    </select>

    <select id="findWithFilter" parameterType="searchFilterDTO" resultType="Board">
        SELECT * FROM bt_tb_board
        WHERE 1=1
        <if test="categoryCode != null">
            AND category_cd = #{categoryCode}
        </if>
        <if test="search != null">
            AND #{searchCode} LIKE CONCAT('%', #{search}, '%')
        </if>
        <if test="sortCode != null">
            GROUP BY #{sortCode} desc
        </if>
    </select>
</mapper>